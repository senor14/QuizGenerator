package poly.controller;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.Resource;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

import poly.dto.CusQDTO;
import poly.dto.QuizDTO;
import poly.service.ICusQService;
import poly.service.IQuizService;

@Controller
public class CusQController {

	private Logger log = Logger.getLogger(this.getClass());

	@Resource(name = "CusQService")
	private ICusQService cusQService;

	@Resource(name = "QuizService")
	private IQuizService quizService;

	@RequestMapping(value = "img/img/enrollment")
	public String quizenrollment(HttpServletRequest request, HttpServletResponse response, ModelMap model) {

		log.info(this.getClass().getName() + ".quizenrollment start!");

		// 현재 유저 번호 가져와서 DB에 저장하는 것
		// 임시로 1로 저장
		String userno = "1";
		String editImgSrc = request.getParameter("editImgSrc");
		
		QuizDTO qDTO = new QuizDTO();
		
		qDTO.setFk_user_no(userno);
		qDTO.setQ_pic(editImgSrc);
		
		CusQDTO cDTO = new CusQDTO();
		List<CusQDTO> rList = new ArrayList<CusQDTO>();
		
		for (int cnt = 1; cnt <= 5; cnt++) {

			String answer = request.getParameter("answer_0" + cnt);
			String cropImgSrc = request.getParameter("cropImgSrc0" + cnt);

			if (cropImgSrc == null || cropImgSrc.equals(""))
				continue;
			
			cDTO.setFk_user_no(userno);
			
			

		}

		log.info(this.getClass().getName() + ".quizenrollment end!");

		return "/img/img";
	}

}
